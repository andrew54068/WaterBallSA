# 釐清問題

購買課程時的金額計算規則為何？若優惠券折抵金額大於課程價格，結果金額 (result_amount) 應為何？

# 定位

Feature：購買課程.feature
Rule：建立訂單時可使用優惠碼，驗證有效後進行金額折抵

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 金額最低為 0，不可為負值 |
| B | 允許負值（系統退款給使用者？） |
| C | 優惠券折抵金額不可大於課程價格（驗證失敗） |
| Short | Format: Short answer (<=5 words) |

# 影響範圍

- Table Purchase (`result_amount`)
- 購買課程.feature (計算金額的 Expected Result)

# 優先級

Medium

---
# 解決記錄

- **回答**：C - 視為驗證失敗，不允許使用折抵金額大於課程價格的優惠券
- **更新的規格檔**：spec/features/購買課程.feature
- **變更內容**：新增規則「優惠券折抵金額不可大於課程價格」與對應 Example，明確定義當折抵金額超過課程價格時，系統應拒絕建立訂單並回傳錯誤。
