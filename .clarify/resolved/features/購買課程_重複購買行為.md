# 釐清問題

關於「不可重複購買 (One-time purchase)」規則，若使用者誤觸或惡意嘗試對已購買的課程再次發出購買請求，API 應如何回應？

# 定位

Feature：購買課程.feature
Rule：每位使用者對同一課程僅限購買一次

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | Idempotent Success：回傳 200 OK，並回傳既有的訂單資訊 (不產生新訂單) |
| B | Client Error：回傳 409 Conflict 或 400 Bad Request，告知 "已購買過此課程" |
| C | Redirect：回傳 302 跳轉至課程內容頁 |
| Short | Format: Short answer (<=5 words) |

# 影響範圍

- 購買課程.feature (Idempotency Example)
- 前端錯誤處理流程

# 優先級

Medium

---
# 解決記錄

- **回答**：B - Client Error：回傳 409 Conflict 或 400 Bad Request，告知 "已購買過此課程"
- **更新的規格檔**：spec/features/購買課程.feature
- **變更內容**：
  1. 定義重複購買行為為「拒絕並回傳錯 (409 Conflict)」。
  2. 新增 Example 驗證此行為。
